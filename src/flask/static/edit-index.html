<!doctype html>
<html lang="en" ng-app="dedeEditApp">

<head>
    <meta charset="utf-8">
    <title>Dede Edit</title>

    <link rel="stylesheet" href="/static/css/bootstrap-3.2.0-dist/bootstrap.css">
    <link rel="stylesheet" href="/static/css/angular-multiselect/angular-multiselect.css">
</head>

<!-- TODO: When everything is functional, cut this up into more html files. -->
<body>

    <!-- I want to also be able to edit tags in a third "tab". -->
    <!-- And maybe even images in a fourth. -->
    <!-- So, PageOrEntryCtrl should be more general. -->
    <div class="container"
        ng-controller="PageOrEntryCtrl">

        <div class="row">
            <div class="col-md-4">
                <h1>Dede edit</h1>
            </div> 
        </div> 

        <div class="row">
            <div class="col-md-2">
                <p>Now editing: </p>
            </div>
            <div class="col-md-2">
                <div class="btn-group">
                    <label class="btn btn-primary"
                        ng-model="pageOrEntry"
                        btn-radio="'page'">page</label>
                    <label class="btn btn-primary"
                        ng-model="pageOrEntry"
                        btn-radio="'entry'">entry</label>
                </div>
            </div>
            <div class="col-md-1">
                <p ng-show="pageOrEntry=='entry'">on</p>
            </div>
            <div class="col-md-2">
                <div class="btn-group" dropdown is-open="status.isopen"
                    ng-controller="PageNamesDropdownCtrl">
                    <button type="button" class="btn btn-primary dropdown-toggle">
                        {{selectedPageName}}<span class="caret"></span>
                    </button>
                    <ul class="dropdown-menu" role="menu">
                        <li ng-repeat="pageName in pageNames">
                            <a ng-click="setPageName(pageName)" href="#">{{pageName}}</a>
                        </li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="row">
            <div class="col-md-8">
                <br/>
                <hr/>
                <br/>
            </div>
        </div>

        <!-- Editing a page. -->
        <div ng-show="pageOrEntry=='page'"
            ng-controller="PageCtrl">

            <div class="row">
                <div class="col-md-4">
                    <button type="button" class="btn btn-sm btn-success"
                        ng-click="store()">Save</button>
                    <button type="button" class="btn btn-sm btn-danger"
                        ng-click="remove()">Delete</button>
                    <button type="button" class="btn btn-sm btn-default"
                        ng-click="clear()">Clear</button>
                </div>
            </div>
            <div class="row">
                <div class="col-md-2">
                    <p>ID:</p>
                </div>
                <div class="col-md-2">
                    <input ng-model="page._id"></input>
                </div>
            </div>
            <div class="row">
                <div class="col-md-2">
                    <p>Page name:</p>
                </div>
                <div class="col-md-2">
                    <input ng-model="page.name"></input>
                </div>
            </div>
            <div class="row">
                <div class="col-md-2">
                    <p>Is shown:</p>
                </div>
                <div class="col-md-2">
                    <span ng-model="page.isShown">{{page.isShown}}</span>
                    <button type="button" class="btn btn-warning btn-sm"
                        ng-click="page.isShown = !page.isShown">Flip</button>
                </div>
            </div>
            <div class="row">
                <div class="col-md-2">
                    <p>Creation date:</p>
                </div>
                <div class="col-md-2">
                    <p>{{page.creationDate}}</p>
                </div>
            </div>
            <div class="row">
                <div class="col-md-2">
                    <p>Modification date:</p>
                </div>
                <div class="col-md-2">
                    <p>{{page.modificationDate}}</p>
                </div>
            </div>
            <div class="row">
                <div class="col-md-2">
                    <p>Entry IDs:</p>
                </div>
                <div class="col-md-2">
                    <input ng-model="page.entryIds"></input>
                </div>
            </div>
        </div>

        <!-- Editing an entry within a page. -->
        <div ng-show="pageOrEntry=='entry'"
            ng-controller="EntryCtrl">

            <div class="row">
                <div class="col-md-4">
                    <button type="button" class="btn btn-sm btn-success"
                        ng-click="store()">Save</button>
                    <button type="button" class="btn btn-sm btn-danger"
                        ng-click="remove()">Delete</button>
                    <button type="button" class="btn btn-sm btn-default"
                        ng-click="clear()">Clear</button>
                </div>
            </div>

            <div class="row">
                <div class="col-md-2">
                    <p>Entry:</p>
                </div>
                <div class="col-md-2">
                    <div class="btn-group" dropdown is-open="status.isopen"
                        ng-controller="EntryNamesDropdownCtrl">
                        <button type="button" class="btn btn-primary dropdown-toggle">
                            {{selectedEntryName}}<span class="caret"></span>
                        </button>
                        <ul class="dropdown-menu" role="menu">
                            <li ng-repeat="entryName in entryNames">
                                <a ng-click="setEntryName(entryName)" href="#">{{entryName}}</a>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="col-md-2">
                    <p>ID:</p>
                </div>
                <div class="col-md-2">
                    <input ng-model="entry._id"></input>
                </div>
            </div>
            <div class="row">
                <div class="col-md-2">
                    <p>Entry name:</p>
                </div>
                <div class="col-md-2">
                    <input ng-model="entry.name"></input>
                </div>
            </div>
            <div class="row">
                <div class="col-md-2">
                    <p>Tags:</p>
                </div>
                <div class="col-md-2">
                    <div ng-controller="TagsCtrl">
                        <multiselect class="input" multiple="true"
                            ng-model="selectedTags"
                            options="tag for tag in tags"
                            change="selected()"
                            template-url="/static/partials/multiselect.tmpl.html"> 
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="col-md-2">
                    <p>Is shown:</p>
                </div>
                <div class="col-md-2">
                    <span ng-model="entry.isShown">{{entry.isShown}}</span>
                    <button type="button" class="btn btn-warning btn-sm"
                        ng-click="entry.isShown = !entry.isShown">Flip</button>
                </div>
            </div>
            <div class="row">
                <div class="col-md-2">
                    <p>Is archived:</p>
                </div>
                <div class="col-md-2">
                    <span ng-model="entry.isArchived">{{entry.isArchived}}</span>
                    <button type="button" class="btn btn-warning btn-sm"
                        ng-click="entry.isArchived = !entry.isArchived">Flip</button>
                </div>
            </div>
            <div class="row">
                <div class="col-md-2">
                    <p>Creation date:</p>
                </div>
                <div class="col-md-2">
                    <p>{{entry.creationDate}}</p>
                </div>
            </div>
            <div class="row">
                <div class="col-md-2">
                    <p>Modification date:</p>
                </div>
                <div class="col-md-2">
                    <p>{{entry.modificationDate}}</p>
                </div>
            </div>
            <div class="row">
                <div class="col-md-4">
                    <p>Elements:</p>
                </div>
            </div>
            <!-- TODO: Add "delete element" button. -->
            <div ng-repeat="element in entry.elements">
                <div class="row">
                    <div class="col-md-2"></div>
                    <div class="col-md-1">
                        <multiselect class="input"
                            ng-model="element.type"
                            options="elementType for elementType in allElementTypes"
                            change="selected()"
                            template-url="/static/partials/singleselect.tmpl.html"> 
                    </div>
                    <div class="col-md-2">
                        <!-- TODO: May put in abbr element to explain fields in tooltip. -->
                        <span>Label:</span>
                        <input ng-model="element.label"></input>
                        <p>{{element.label}}</p>
                    </div>
                    <div class="col-md-4">
                        <span>Data:</span>
                        <!-- TODO: Input should expand into new rows as content grows. -->
                        <textarea style="resize:none" cols="40"
                            msd-elastic
                            ng-model="element.data"></textarea>
                        <p>{{element.data}}</p>
                    </div>
                    <div class="col-sm-1" ng-show="element.type=='title'">
                        <span>Level:</span>
                        <input ng-model="element.level"></input>
                        <p>{{element.level}}</p>
                    </div>
                </div>
            </div>
        </div>


    </div> 


    <script src="/static/js/lib/angular-1.2.21/angular.js"></script>
    <script src="/static/js/lib/angular-1.2.21/angular-route.js"></script>
    <script src="/static/js/lib/angular-1.2.21/angular-resource.js"></script>

    <script src="/static/js/lib/ui-bootstrap/ui-bootstrap-tpls-0.11.0.js"></script>
    <script src="/static/js/lib/angular-multiselect/multiselect.js"></script>
    <script src="/static/js/lib/angular-elastic/elastic.js"></script>

    <script src="/static/js/edit-app/editServices.js"></script>
    <script src="/static/js/edit-app/editControllers.js"></script>
    <script src="/static/js/edit-app/editFilters.js"></script>
    <script src="/static/js/edit-app/editApp.js"></script>
</body>

</html>


